---
layout: default
title: Django Installation
parent: Beta
nav_order: 1
---
1. TOC
{:toc}

---

## Installation

### Prerequisites

First of all you need:
- [Python3](/installation/python)
- [Redis](/installation/redis)

Redis is used for the long running task with [Celery](https://docs.celeryproject.org/en/stable/). It allows us to do asynchronous task in the background.

---
### Requirements

```Bash
pip3 install -r requirements.txt
pip3 install celery
```

This will install all the required packages and django applications.

---
### Initialisation 

First of all you need to go to `osat/settings.py`.
You need to change the specific values to what you want to use in the 

```Python
DATABASES = {
    ...
}
```

You can find more information [here](https://docs.djangoproject.com/en/3.1/ref/databases/)

The supported databases are:
- PostgreSQL
- MariaDB
- MySQL
- Oracle
- SQLite

Only relational databases are working. Django was originally build for bloging.

For example, I've used a postgresql on AWS for testing purposes. My configuration is as follows:

```Python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'osat',
        'USER': 'postgres',
        'PASSWORD': os.environ.get("POSTGRES_PASSWORD", "TEST"),
        'HOST': 'osat.ctcghdbvsxw2.eu-west-3.rds.amazonaws.com',
        'PORT': '5432',
    }
}
```

I just type `export POSTGRES_PASSWORD=<password>` in my terminal before launching to export my password.

---
### Running

**You need to have a Redis server running on your machine.**


If you want to run the project.

- `python manage.py migrate` 
- `python manage.py createsuperuser`
- `python manage.py runserver`

And in another terminal run:

`celery -A osat  worker -l info`

`celery -A osat beat -l info`

A little explanation on what those things do later on.


#### Migrate

The command `python manage.py migrate` runs the migration on the database in order to apply all the changes that are necessary to your db. It is a commmand that you should run if you change the models in your code.


#### Create Super User

The command `python manage.py createsuperuser` creates a super user for the admin framework backend. Django comes with authentification. In order to access the admin framework located at [https://localhost:8000/admin](https://localhost:8000/admin) you'll have to do that first.


#### Run Server

The command `python manage.py runserver` runs webserver django


#### Celery 

The command `celery -A osat  worker -l info` runs the workers needed for the long running tasks

The command `celery -A osat beat -l info` run the periodic task needed.

---
### Changes to models

Let's say that for some reasons you decide to change the models or you want to create new ones.
You'll have to run the following commands.

- `python3 manage.py makemigrations`
- `python3 manage.py migrate` 

`makemigrations` creates files for the migration based on the changes that you did. Please make sure that you always commit the files generated by `makemigrations`
`migrate` runs the migration files on your database and applies the changes.
